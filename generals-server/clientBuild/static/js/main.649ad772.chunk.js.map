{"version":3,"sources":["AudioControl/AudioControl.module.scss","BattleHistory/BattleHistory.module.scss","Abilities/Abilities.module.scss","Lobby/Lobby.module.scss","config.js","storage/game/game.action.js","storage/user/user.reducer.js","storage/messages/message.reducer.js","storage/game/game.reducer.js","storage/settings/settings.reducer.js","storage/history/history.reducer.js","storage/reducer.js","storage/user/user.action.js","storage/messages/message.action.js","storage/settings/settings.action.js","storage/history/history.action.js","storage/store.js","audioPlayer/audioPlayer.js","storage/game/game.selector.js","socket/socketManager.js","storage/user/user.selector.js","RoomTeams/RoomTeams.jsx","Lobby/Lobby.jsx","storage/messages/messages.selector.js","LiveChat/LiveChat.jsx","Game/Moves.js","Game/Reactions.js","Game/Field.jsx","Game/Board.jsx","storage/settings/settings.selector.js","Settings/Settings.jsx","GameInfo/GameInfo.jsx","AudioControl/AudioControl.jsx","storage/history/history.selector.js","hooks/useRefState.js","BattleHistory/BattleHistory.jsx","Abilities/Ability.jsx","Abilities/Abilities.jsx","App.js","serviceWorker.js","index.js","RoomTeams/RoomTeams.module.scss","LiveChat/LiveChat.module.scss","GameInfo/GameInfo.module.scss","Settings/Settings.module.scss"],"names":["module","exports","config","address","SET_BOARD","setActiveField","coordinates","type","payload","setCommands","commands","removeCommands","commandIds","setPlayerRole","role","setAbilitySelection","ability","INITIAL_STATE","userName","socketId","roomId","INIT_COOLDOWNS","reborn","unite","moveCapitol","defender","plowingField","scan","autumn","archery","players","playerIdToTeamId","board","activeField","x","y","userColors","usersStats","tourCounter","playerRole","moveType","abilitySelection","cooldowns","abilityVisibleFields","passiveAbilities","privateSettings","gameSettings","mapWidth","mapHeight","gameMode","nonAggression","castlesDensity","mountainDensity","archeryTowersDensity","observerTowersDensity","abandonedFortressesDensity","castleProduction","fieldProduction","turnDuration","history","reducers","user","state","action","find","v","messages","game","reduce","acc","teamId","color","actions","filter","includes","id","nextCooldowns","Object","keys","forEach","key","nextFields","settings","settingName","value","rootReducer","combineReducers","middlwares","thunk","audio","dialogsAudio","dialogsAudio2","createStoreWithMiddleware","applyMiddleware","createStore","reducer","playersSelector","boardSelector","activeFieldSelector","commandsSelector","userColorsSelector","playerRoleSelector","usersStatsSelector","tourCounterSelector","moveTypeSelector","abilitySelectionSelector","playerIdToTeamIdSelector","cooldownsSelector","abilityVisibleFieldsSelector","passiveAbilitiesSelector","BATTLE_START_MUSIC","process","OPENING_MUSIC","WELCOME_DIALOG","PEACFULL_BACKGROUNDS","BATTLE_MUSIC","LOST_MUSIC","WON_MUSIC","playStartMusic","playMusic","playStartDialog","playDialog","playPeacfullBackgoundMusic","sample","BATTLE_MUSIC2","REBORN_DIALOG","PLOWING_FIELD1","MOVE_CAPITOL","UNITE_ARMY","DEFENDER","CONQUER_CAPITOL","LOST_CAPITOL","CONQUER_CASTLE","ARCHERY_SELECT","AUTUMN_SELECT","AUTUMN_EFFECT","playAutumnEffect","CROWN_FINDER","ARCHERY_SHOOTED","volume","audioPath","Audio","onended","store","getState","pause","src","load","play","console","log","playDialog2","io","socketIO","eraseCommands","emit","executeInstantCommand","commandType","details","on","dispatch","setTimeout","setUserColorsInHistory","stats","updateStats","flat","owner","vX","vY","isVisible","setBoard","cooldownName","name","setCooldown","fields","iX","iY","push","message","createRoom","replaceGameSetting","setUser","setPlayers","window","alert","userSelector","TEAM_NAMES","useSelector","className","styles","map","index","onClick","nextTeamId","disabled","FormItem","Form","Item","useDispatch","useState","setRoomId","isNameConfirmed","setIsNameConfirmed","isAllDisabled","alt","help","style","display","onChange","e","target","placeholder","width","joinToRoom","RoomTeams","messagesSelector","newMessage","setNewMessage","setIsVisible","move","prevX","prevY","translateDirectionKeyToMove","direction","isPositionValid","tileTo","command","nextCommand","from","uniqid","length","clickOnActiveField","MOVE_KEYS","keyboardListener","eraseLastCommand","eraseAllCommands","commandToErase","React","memo","field","visibleFromAbility","units","isOwner","isActiveField","isClickableByAbility","onContextMenu","event","preventDefault","backgroundColor","backgroundImage","getImageLink","classnames","getClassForArrow","getSignForArrow","prevProps","nextProps","isEqual","imagePath","debug","overridedBoard","overridedUserColors","visibleFields","isAllVisible","allCrownsVisible","mouseMoveListener","movementX","movementY","buttons","document","getElementById","left","top","Number","slice","mouseWheelListener","deltaY","nextScale","transform","String","padEnd","useEffect","addEventListener","removeEventListener","commandsForFields","row","Field","gameSettingsSelector","notifySettingsChange","Select","Option","debounce","setRoomSettings","isHost","handleChangeSetting","modifyGameSetting","handleStartBattle","gameParams","marginTop","min","max","step","userStats","tour","Fragment","background","lands","vloumeLevel","setVloumeLevel","handleSetVolumeLevel","level","setVolume","icon","SoundOutlined","historySelector","historyUserColorsSelector","useRefState","initialValue","setState","stateRef","useRef","current","historyUserColors","tourIndexRef","setTourIndex","speed","speedRef","setSpeed","isAutoPlay","isAutoPlayRef","setIsAutoPlay","updateBoard","tourIndex","rewindBack","frames","nextBoardIndex","rewindForward","autoFrma","init","DoubleLeftOutlined","BackwardOutlined","CaretLeftOutlined","CaretRightOutlined","FastForwardOutlined","DoubleRightOutlined","handleClick","selectedAbility","cooldown","isPassive","isOwned","description","maxCooldown","cost","isDisabled","title","placement","content","boxShadow","Math","ceil","imgPath","abilityReborn","capitolAbilities","builidingAbilities","fromFieldName","gatheredPassiveAbilities","playerStats","isPlayerDead","handleClickAbility","handleSetAbilitySelectionMode","capitol","ownedSpecialFields","Ability","some","App","AudioControl","Abilities","GameInfo","LiveChat","Lobby","Settings","BattleHistory","Boolean","location","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.649ad772.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"audio-panel\":\"AudioControl_audio-panel__1D5FQ\",\"slider-wrapper\":\"AudioControl_slider-wrapper__3K4Ro\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"speed-slider\":\"BattleHistory_speed-slider__1IaQG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ability-panel\":\"Abilities_ability-panel__3qPLH\",\"ability-block-container\":\"Abilities_ability-block-container__3GhIM\",\"ability-block\":\"Abilities_ability-block__1IWen\",\"filler-block\":\"Abilities_filler-block__3xwKI\",\"filler-block__disabled\":\"Abilities_filler-block__disabled__1QYAQ\",\"ability-description-box\":\"Abilities_ability-description-box__2pgdv\",\"selected-block\":\"Abilities_selected-block__cdLMW\",\"clickable\":\"Abilities_clickable__y9Paf\",\"popover-stats\":\"Abilities_popover-stats__3nSM0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"lobby-wrapper\":\"Lobby_lobby-wrapper__lDjyO\",\"lobby-content-box\":\"Lobby_lobby-content-box__QuG4U\",\"header\":\"Lobby_header__2r9_D\",\"subtytle\":\"Lobby_subtytle__2WrLL\",\"logo\":\"Lobby_logo__tbCPE\",\"logo-left\":\"Lobby_logo-left__1BVEf\",\"logo-right\":\"Lobby_logo-right__3mpPN\"};","const devConfig = {\r\n    address: '/'\r\n}\r\n\r\nconst config = devConfig\r\n\r\nexport default config","export const SET_PLAYERS = 'game.setPlayers'\r\nexport const setPlayers = (players) => ({\r\n    type: SET_PLAYERS,\r\n    payload: players\r\n})\r\n\r\nexport const SET_BOARD = 'game.setBoard'\r\nexport const setBoard = (board) => ({\r\n    type: SET_BOARD,\r\n    payload: board\r\n})\r\n\r\nexport const SET_ACTIVE_FIELD = 'game.setActiveField'\r\nexport const setActiveField = (coordinates) => ({\r\n    type: SET_ACTIVE_FIELD,\r\n    payload: coordinates\r\n})\r\n\r\nexport const SET_COMMANDS = 'game.setCommands'\r\nexport const setCommands = (commands) => ({\r\n    type: SET_COMMANDS,\r\n    payload: commands\r\n})\r\n\r\nexport const REMOVE_COMMANDS = 'game.removeCommands'\r\nexport const removeCommands = (commandIds) => ({\r\n    type: REMOVE_COMMANDS,\r\n    payload: commandIds\r\n})\r\n\r\nexport const SET_PLAYER_ROLE = 'game.setPlayerRole'\r\nexport const setPlayerRole = (role) => ({\r\n    type: SET_PLAYER_ROLE,\r\n    payload: role\r\n})\r\n\r\nexport const UPDATE_STATS = 'game.updateStats'\r\nexport const updateStats = (stats) => ({\r\n    type: UPDATE_STATS,\r\n    payload: stats\r\n})\r\n\r\nexport const SET_MOVE_TYPE = 'game.setMoveType'\r\nexport const setMoveType = (type) => ({\r\n    type: SET_MOVE_TYPE,\r\n    payload: type\r\n})\r\n\r\nexport const SET_ABILITY_SELECTION = 'game.abilitySelection'\r\nexport const setAbilitySelection = (ability) => ({\r\n    type: SET_ABILITY_SELECTION,\r\n    payload: ability\r\n})\r\n\r\nexport const SET_COOLDOWN = 'game.setCooldown'\r\nexport const setCooldown = (name, value) => ({\r\n    type: SET_COOLDOWN,\r\n    payload: {[name]: value}\r\n})\r\n\r\nexport const COOLDOWN_TIC = 'game.cooldownTic'\r\nexport const cooldownTic = () => ({\r\n    type: COOLDOWN_TIC,\r\n})\r\n\r\nexport const ADD_AILITY_VISIBLE_FIELDS = 'game.addAbilityVisibleFields'\r\nexport const addAbilityVisibleFields = (fieldsList) => ({\r\n    type: ADD_AILITY_VISIBLE_FIELDS,\r\n    payload: fieldsList\r\n})\r\n\r\nexport const ADD_PASSIVE_ABILITY = 'game.addPassiveAbility'\r\nexport const addPassiveAbility = (ability) => ({\r\n    type: ADD_PASSIVE_ABILITY,\r\n    payload: ability\r\n})","import * as actions from './user.action'\r\nimport { SET_PLAYERS } from '../game/game.action'\r\n\r\nconst INITIAL_STATE = {\r\n    userName: 'King',\r\n    socketId: '',\r\n    roomId: ''\r\n}\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n    switch(action.type) {\r\n        case actions.SET_USER_NAME:\r\n            return {...state, userName: action.payload}\r\n        case actions.SET_USER:\r\n            return {...state, ...action.payload}\r\n        case SET_PLAYERS:\r\n            return {...state, ...action.payload.find(v => v.socketId === state.socketId)}\r\n        default:\r\n            return state\r\n    }\r\n}","import * as actions from './message.action'\r\n\r\nconst INITIAL_STATE = []\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n    switch(action.type) {\r\n        case actions.ADD_MESSAGE:\r\n            return [...state, action.payload]\r\n        default:\r\n            return state\r\n    }\r\n}","import * as actions from './game.action'\r\n\r\nconst INIT_COOLDOWNS = {\r\n    reborn: 0,\r\n    unite: 0,\r\n    moveCapitol: 0,\r\n    defender: 0,\r\n    plowingField: 0,\r\n    scan: 0,\r\n    autumn: 0,\r\n    archery: 0\r\n}\r\n\r\nconst INITIAL_STATE = {\r\n    players: [],\r\n    playerIdToTeamId: {},\r\n    board: [[]],\r\n    activeField: {x: -1, y: -1},\r\n    commands: [],\r\n    userColors: {},\r\n    usersStats: {},\r\n    tourCounter: 0,\r\n    playerRole: 'lobby',\r\n    moveType: 'all',\r\n    abilitySelection: null,\r\n    cooldowns: INIT_COOLDOWNS,\r\n    abilityVisibleFields: {},\r\n    passiveAbilities: [],\r\n}\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n    switch(action.type) {\r\n        case actions.SET_PLAYERS:\r\n            return {\r\n                ...state, \r\n                players: action.payload,\r\n                playerIdToTeamId: action.payload.reduce((acc, v) => ({...acc, [v.socketId]: v.teamId}), {}),\r\n                userColors: action.payload.reduce((acc, v) => ({...acc, [v.socketId]: v.color}), {})\r\n            }\r\n        case actions.SET_BOARD:\r\n            return {...state, board: action.payload}\r\n        case actions.SET_ACTIVE_FIELD:\r\n            return {...state, activeField: action.payload, moveType: 'all'}\r\n        case actions.SET_COMMANDS:\r\n            return {...state, commands: action.payload}\r\n        case actions.REMOVE_COMMANDS:\r\n            return {...state, commands: state.commands.filter(v => !action.payload.includes(v.id))}\r\n        case actions.SET_PLAYER_ROLE:\r\n            return {...state, playerRole: action.payload, cooldowns: INIT_COOLDOWNS, abilityVisibleFields: {}, passiveAbilities: []}\r\n        case actions.UPDATE_STATS:\r\n            return {...state, ...action.payload}\r\n        case actions.SET_MOVE_TYPE:\r\n            return {...state, moveType: action.payload}\r\n        case actions.SET_ABILITY_SELECTION:\r\n            return {...state, abilitySelection: action.payload}\r\n        case actions.SET_COOLDOWN:\r\n            return {...state, cooldowns: {...state.cooldowns, ...action.payload}}\r\n        case actions.COOLDOWN_TIC:{\r\n            const nextCooldowns = {...state.cooldowns}\r\n            Object.keys(nextCooldowns).forEach(key => nextCooldowns[key] && nextCooldowns[key]--)\r\n            return {...state, cooldowns: nextCooldowns}\r\n        }\r\n        case actions.ADD_AILITY_VISIBLE_FIELDS:{\r\n            const nextFields = {...state.abilityVisibleFields}\r\n            action.payload.forEach(({x, y}) => {\r\n                if(!nextFields[x]) nextFields[x] = {}\r\n                nextFields[x][y] = true\r\n            })\r\n            return {...state, abilityVisibleFields: nextFields}\r\n        }\r\n        case actions.ADD_PASSIVE_ABILITY:{\r\n            return {...state, passiveAbilities: [...state.passiveAbilities, action.payload]}\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}","import * as actions from './settings.action'\r\n\r\n\r\nconst INITIAL_STATE = ({\r\n    privateSettings: {},\r\n    gameSettings: {\r\n        mapWidth: 20,\r\n        mapHeight: 20,\r\n        gameMode: 'Conquest',\r\n        nonAggression: 50,\r\n        castlesDensity: 0.5,\r\n        mountainDensity: 0.5,\r\n        archeryTowersDensity: 0.3,\r\n        observerTowersDensity: 0.3,\r\n        abandonedFortressesDensity: 0.3,\r\n        castleProduction: 1,\r\n        fieldProduction: 25,\r\n        turnDuration: 1000,\r\n    }\r\n})\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n    switch(action.type) {\r\n        case actions.REPLACE_GAME_SETTING:\r\n            return {...state, gameSettings: action.payload}\r\n        case actions.MODIFY_GAME_SETTING:{\r\n            const {settingName, value} = action.payload\r\n            return {...state, gameSettings: {...state.gameSettings, [settingName]: value}}\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}","import * as actions from './history.action'\r\nimport { SET_BOARD } from '../game/game.action'\r\n\r\nconst INITIAL_STATE = {\r\n    history: [],\r\n    userColors: {}\r\n}\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n    switch(action.type) {\r\n        case actions.ERASE_HISTORY:\r\n            return INITIAL_STATE\r\n        case actions.SET_USER_COLORS:\r\n            return {...state, userColors: action.payload}\r\n        case SET_BOARD:\r\n            return {...state, history: [...state.history, action.payload]}\r\n        default:\r\n            return state\r\n    }\r\n}","import { combineReducers } from 'redux'\r\nimport user from './user/user.reducer'\r\nimport messages from './messages/message.reducer'\r\nimport game from './game/game.reducer'\r\nimport settings from './settings/settings.reducer'\r\nimport history from './history/history.reducer'\r\n\r\nconst reducers = {\r\n    user,\r\n    messages,\r\n    game,\r\n    settings,\r\n    history\r\n}\r\n\r\nconst rootReducer = (state ={}, action) => combineReducers(reducers)(state, action)\r\n\r\nexport default rootReducer\r\n","export const SET_USER_NAME = 'user.setName'\r\nexport const setUserName = (name) => ({\r\n    type: SET_USER_NAME,\r\n    payload: name\r\n})\r\n\r\nexport const SET_USER = 'user.setUser'\r\nexport const setUser = (user) => ({\r\n    type: SET_USER,\r\n    payload: user\r\n})","export const ADD_MESSAGE = 'messages.addMessage'\r\nexport const addMessage = (msg) => ({\r\n    type: ADD_MESSAGE,\r\n    payload: msg\r\n})","export const MODIFY_GAME_SETTING = 'MODIFY_GAME_SETTING'\r\nexport const modifyGameSetting = (settingName, value) => ({\r\n    type: MODIFY_GAME_SETTING,\r\n    payload: {settingName, value}\r\n})\r\n\r\nexport const REPLACE_GAME_SETTING = 'REPLACE_GAME_SETTING'\r\nexport const replaceGameSetting = (settings) => ({\r\n    type: REPLACE_GAME_SETTING,\r\n    payload: settings\r\n})","export const ERASE_HISTORY = 'history.erase'\r\nexport const eraseHistory = () => ({\r\n    type: ERASE_HISTORY\r\n})\r\n\r\nexport const SET_USER_COLORS = 'history.setUserColors'\r\nexport const setUserColorsInHistory = (userColors) => ({\r\n    type: SET_USER_COLORS,\r\n    payload: userColors\r\n})","import { createStore, applyMiddleware } from 'redux'\r\nimport reducer from './reducer'\r\nimport thunk from 'redux-thunk'\r\nimport logger from 'redux-logger'\r\n\r\nlet middlwares = [thunk]\r\nif(process.env.NODE_ENV === 'development') middlwares.push(logger)\r\n\r\nconst createStoreWithMiddleware = applyMiddleware(\r\n    ...middlwares\r\n)(createStore)\r\n\r\nexport default createStoreWithMiddleware(reducer)","import {sample} from 'lodash'\r\nimport store from '../storage/store'\r\nimport { playerRoleSelector } from '../storage/game/game.selector'\r\n\r\nconst BATTLE_START_MUSIC =  `${process.env.PUBLIC_URL}/battleStart1.mp3`\r\nconst OPENING_MUSIC =  `${process.env.PUBLIC_URL}/open.mp3`\r\nconst WELCOME_DIALOG =  `${process.env.PUBLIC_URL}/dialogs/Welcome.wav`\r\nconst CAPTURE_CAPITOL_SOUND = `${process.env.PUBLIC_URL}/cnquest.mp3`\r\n\r\nconst PEACFULL_MUSIC = `${process.env.PUBLIC_URL}/peacefullMusic.mp3`\r\nconst PEACFULL_MUSIC2 = `${process.env.PUBLIC_URL}/peacefullMusic2.mp3`\r\nconst PEACFULL_MUSIC3 = `${process.env.PUBLIC_URL}/peacefullMusic3.mp3`\r\nconst PEACFULL_MUSIC4 = `${process.env.PUBLIC_URL}/peacefullMusic4.mp3`\r\nconst PEACFULL_BACKGROUNDS = [PEACFULL_MUSIC, PEACFULL_MUSIC2, PEACFULL_MUSIC3, PEACFULL_MUSIC4]\r\n\r\nconst BATTLE_MUSIC = `${process.env.PUBLIC_URL}/battleMusic.mp3`\r\n\r\nconst LOST_MUSIC = `${process.env.PUBLIC_URL}/lost.mp3`\r\nconst WON_MUSIC = `${process.env.PUBLIC_URL}/won.mp3`\r\n\r\nexport const playStartMusic = () => playMusic(OPENING_MUSIC)\r\nexport const playStartDialog = () => playDialog(WELCOME_DIALOG)\r\nexport const playOpeningMusic = () => {\r\n    setTimeout(playStartDialog, 1000)\r\n    setTimeout(playStartMusic, 5000)\r\n}\r\nexport const playBattleStartMusic = () => playMusic(BATTLE_START_MUSIC)\r\nexport const playCaptureCapitolSound = () => playDialog(CAPTURE_CAPITOL_SOUND)\r\n\r\nexport const playPeacfullBackgoundMusic = () => playMusic(sample(PEACFULL_BACKGROUNDS))\r\nexport const playBattleMusic = () => playMusic(BATTLE_MUSIC)\r\n\r\nconst BATTLE_MUSIC2 = `${process.env.PUBLIC_URL}/battleMusic2.mp3`\r\nexport const playBattleMusic2 = () => playMusic(BATTLE_MUSIC2)\r\n\r\nexport const playLostMusic = () => playMusic(LOST_MUSIC)\r\nexport const playWinMusic = () => playMusic(WON_MUSIC)\r\n\r\n// commands\r\nconst REBORN_DIALOG = `${process.env.PUBLIC_URL}/dialogs/RiseFromAshes.wav`\r\nexport const playRebornDialog = () => playDialog(REBORN_DIALOG)\r\n\r\nconst PLOWING_FIELD1 = `${process.env.PUBLIC_URL}/dialogs/PlowingField1.wav`\r\nconst PLOWING_FIELD2 = `${process.env.PUBLIC_URL}/dialogs/PlowingField2.wav`\r\nexport const playPlowingFieldConfirmation = () => playDialog(sample([PLOWING_FIELD1]))\r\n\r\nconst MOVE_CAPITOL = `${process.env.PUBLIC_URL}/dialogs/MoveCapitol.wav`\r\nexport const playMoveCapitolConfirmation = () => playDialog(MOVE_CAPITOL)\r\n\r\nconst UNITE_ARMY = [\r\n    `${process.env.PUBLIC_URL}/dialogs/UniteArmy1.wav`,\r\n    `${process.env.PUBLIC_URL}/dialogs/UniteArmy2.wav`,\r\n    `${process.env.PUBLIC_URL}/dialogs/UniteArmy3.wav`,\r\n    `${process.env.PUBLIC_URL}/dialogs/UniteArmy4.wav`\r\n]\r\nexport const playUniteArmyConfirmation = () => playDialog(sample(UNITE_ARMY))\r\n\r\nconst DEFENDER = [\r\n    `${process.env.PUBLIC_URL}/dialogs/Defender1.wav`,\r\n    `${process.env.PUBLIC_URL}/dialogs/Defender2.wav`,\r\n    `${process.env.PUBLIC_URL}/dialogs/Defender3.wav`,\r\n    `${process.env.PUBLIC_URL}/dialogs/Defender4.wav`,\r\n]\r\nexport const playDefenderConfirmation = () => playDialog(sample(DEFENDER))\r\n\r\nconst CONQUER_CAPITOL = `${process.env.PUBLIC_URL}/dialogs/ConquerCapitol.wav`\r\nexport const playConquerCapitol = () => playDialog(CONQUER_CAPITOL)\r\n\r\nconst LOST_CAPITOL = `${process.env.PUBLIC_URL}/dialogs/LostCapitol.wav`\r\nexport const playLostCapitol = () => playDialog(LOST_CAPITOL)\r\n\r\nconst CONQUER_CASTLE = [\r\n    `${process.env.PUBLIC_URL}/dialogs/ConquerCastle.wav`,\r\n    `${process.env.PUBLIC_URL}/dialogs/ConquerCastle2.wav`\r\n]\r\nexport const playConquerCastle = () => playDialog(sample(CONQUER_CASTLE))\r\n\r\nconst ARCHERY_SELECT = [\r\n    `${process.env.PUBLIC_URL}/dialogs/ArchPrepare1.wav`,\r\n    `${process.env.PUBLIC_URL}/dialogs/ArchPrepare2.wav`,\r\n]\r\nexport const playArcheriesReady = () => playDialog2(sample(ARCHERY_SELECT))\r\n\r\nconst AUTUMN_SELECT = [\r\n    `${process.env.PUBLIC_URL}/dialogs/5gSelect.wav`,\r\n    `${process.env.PUBLIC_URL}/dialogs/5gSelect2.wav`\r\n]\r\nexport const playAutumnSelect = () => playDialog2(sample(AUTUMN_SELECT))\r\n\r\nconst AUTUMN_EFFECT = `${process.env.PUBLIC_URL}/dialogs/5gEffect.mp3`\r\nexport const playAutumnEffect = () => playDialog(AUTUMN_EFFECT)\r\n\r\nconst CROWN_FINDER = `${process.env.PUBLIC_URL}/dialogs/FindCapitol.wav`\r\nexport const playCrownFinder = () => playDialog(CROWN_FINDER)\r\n\r\nconst ARCHERY_SHOOTED = [\r\n    // `${process.env.PUBLIC_URL}/dialogs/ArchShooted1.wav`,\r\n    // `${process.env.PUBLIC_URL}/dialogs/ArchShooted2.wav`,\r\n    `${process.env.PUBLIC_URL}/dialogs/ArchShooted3.wav`,\r\n    // `${process.env.PUBLIC_URL}/dialogs/ArchShooted4.wav`,\r\n]\r\nexport const playArcheryShooted = () => playDialog(sample(ARCHERY_SHOOTED))\r\n\r\nvar audio\r\nvar dialogsAudio\r\nvar dialogsAudio2\r\nvar volume = 0.5\r\n\r\nconst playMusic = (audioPath) => {\r\n    if(!audio) {\r\n        audio = new Audio()\r\n        audio.onended = () => playerRoleSelector(store.getState()) === 'fighter' && playBattleMusic2()\r\n    }\r\n    audio.pause()\r\n    audio.src = audioPath\r\n    audio.load()\r\n    audio.volume = volume\r\n    audio.play()\r\n}\r\n\r\nconst playDialog = (audioPath) => {\r\n    console.log('Playing: ', audioPath)\r\n    if(!dialogsAudio) dialogsAudio = new Audio()\r\n    dialogsAudio.pause()\r\n    dialogsAudio.src = audioPath\r\n    dialogsAudio.load()\r\n    dialogsAudio.volume = volume\r\n    dialogsAudio.play()\r\n}\r\n\r\nconst playDialog2 = (audioPath) => {\r\n    console.log('Playing2: ', audioPath)\r\n    if(!dialogsAudio2) dialogsAudio2 = new Audio()\r\n    dialogsAudio2.pause()\r\n    dialogsAudio2.src = audioPath\r\n    dialogsAudio2.load()\r\n    dialogsAudio2.volume = volume\r\n    dialogsAudio2.play()\r\n}\r\n\r\nexport const stopSounds = () => {\r\n    if(audio) audio.pause()\r\n    if(dialogsAudio) dialogsAudio.pause()\r\n    if(dialogsAudio2) dialogsAudio2.pause()\r\n}\r\n\r\nexport const setVolume = (level) => {\r\n    volume = level\r\n\r\n    if(audio) audio.volume = volume\r\n    if(dialogsAudio) dialogsAudio.volume = volume\r\n    if(dialogsAudio2) dialogsAudio2.volume = volume\r\n}","export const playersSelector = state => state.game.players\r\nexport const boardSelector = state => state.game.board\r\nexport const activeFieldSelector = state => state.game.activeField\r\nexport const commandsSelector = state => state.game.commands\r\nexport const userColorsSelector = state => state.game.userColors\r\nexport const playerRoleSelector = state => state.game.playerRole\r\nexport const usersStatsSelector = state => state.game.usersStats\r\nexport const tourCounterSelector = state => state.game.tourCounter\r\nexport const moveTypeSelector = state => state.game.moveType\r\nexport const abilitySelectionSelector = state => state.game.abilitySelection\r\nexport const playerIdToTeamIdSelector = state => state.game.playerIdToTeamId\r\nexport const cooldownsSelector = state => state.game.cooldowns\r\nexport const abilityVisibleFieldsSelector = state => state.game.abilityVisibleFields\r\nexport const passiveAbilitiesSelector = state => state.game.passiveAbilities","import socketIO from 'socket.io-client'\r\nimport config from '../config'\r\nimport store from '../storage/store'\r\nimport { setUser } from '../storage/user/user.action'\r\nimport { setPlayers, setBoard, removeCommands, updateStats, setPlayerRole, setActiveField, setCommands, setAbilitySelection, setCooldown, cooldownTic, addAbilityVisibleFields, addPassiveAbility } from '../storage/game/game.action'\r\nimport { addMessage } from '../storage/messages/message.action'\r\nimport { replaceGameSetting } from '../storage/settings/settings.action'\r\nimport { playBattleStartMusic, playPeacfullBackgoundMusic, playLostMusic, playWinMusic, playBattleMusic, playRebornDialog, playPlowingFieldConfirmation, playMoveCapitolConfirmation, playUniteArmyConfirmation, playDefenderConfirmation, playConquerCastle, playConquerCapitol, playLostCapitol, playArcheryShooted, playAutumn, playAutumnEffect } from '../audioPlayer/audioPlayer'\r\nimport { eraseHistory, setUserColorsInHistory } from '../storage/history/history.action'\r\nimport { playersSelector, passiveAbilitiesSelector } from '../storage/game/game.selector'\r\n\r\nconst io = socketIO(config.address)\r\n\r\n\r\n// MAIN ACTIONS\r\nexport const startGame = (gameParams) => io.emit('start', gameParams)\r\nexport const addCommand = (command) => io.emit('addCommand', command)\r\nexport const eraseCommands = (commandIds) => io.emit('eraseCommands', commandIds)\r\nexport const executeInstantCommand = (commandType, details) => io.emit('executeInstantCommand', commandType, details)\r\nio.on('startBattle', () => {\r\n    store.dispatch(setActiveField({x: -1, y: -1}))\r\n    store.dispatch(setCommands([]))\r\n    store.dispatch(setPlayerRole('fighter'))\r\n    store.dispatch(setAbilitySelection(null))\r\n    \r\n\r\n    playBattleStartMusic()\r\n    setTimeout(() => playPeacfullBackgoundMusic(), 6000)\r\n    \r\n    // HISTORY\r\n    const userColors = playersSelector(store.getState())\r\n                        .reduce((acc, v) => ({...acc, [v.socketId]: v.color}), {})\r\n    store.dispatch(eraseHistory())\r\n    store.dispatch(setUserColorsInHistory(userColors))\r\n})\r\nio.on('updateStats', (stats) => store.dispatch(updateStats(stats)))\r\nio.on('loser', () => {\r\n    playLostMusic()\r\n})\r\nio.on('winner', () => {\r\n    playWinMusic()\r\n    store.dispatch(setPlayerRole('spectator'))\r\n})\r\n\r\nio.on('endOfPeace', () => playBattleMusic())\r\n\r\nio.on('updateBoard', board => {\r\n    const teamId = store.getState().user.teamId\r\n    const playerIdToTeamId = store.getState().game.playerIdToTeamId\r\n\r\n    board\r\n        .flat()\r\n        .filter(v => playerIdToTeamId[v.owner] === teamId)\r\n        .forEach((({x, y}) => {\r\n            for(let vX = x -1; vX <= x + 1; vX++)\r\n                for(let vY = y -1; vY <= y + 1; vY++) \r\n                    if(board[vY] && board[vY][vX])\r\n                        board[vY][vX].isVisible = true\r\n        }))\r\n\r\n    store.dispatch(setBoard(board))\r\n})\r\nio.on('removeCommands', commandIds => store.dispatch(removeCommands(commandIds)))\r\nio.on('setCooldown', (cooldownName, value) => {\r\n    store.dispatch(setCooldown(cooldownName, value))\r\n    if (cooldownName === 'reborn') playRebornDialog()\r\n    if (cooldownName === 'unite') playUniteArmyConfirmation()\r\n    if (cooldownName === 'defender') playDefenderConfirmation()\r\n    if (cooldownName === 'autumn') playAutumnEffect()\r\n    if (cooldownName === 'revealCapitols') {\r\n        store.dispatch(addPassiveAbility('revealCapitols'))\r\n    }\r\n})\r\nio.on('cooldownTic', () => store.dispatch(cooldownTic()))\r\nio.on('confirmScan', ({x, y}) => {\r\n    const fields = []\r\n    for (let iX = x - 1; iX <= x + 1; iX++) {\r\n        for (let iY = y - 1; iY <= y + 1; iY++) {\r\n            fields.push({x: iX, y: iY})\r\n        }\r\n    }\r\n    store.dispatch(addAbilityVisibleFields(fields))\r\n})\r\n\r\n// SOUND_NOTYFICATIONS\r\nio.on('sound_ConquerCastle', playConquerCastle)\r\nio.on('sound_ConquerCapitol', playConquerCapitol)\r\nio.on('sound_LostCapitol', playLostCapitol)\r\nio.on('sound_archeryShooted', playArcheryShooted)\r\nio.on('sound_autumn', playAutumnEffect)\r\n\r\n// CHAT\r\nexport const sendMessage = (message) => io.emit('sendMessage', message)\r\nio.on('chat', message => store.dispatch(addMessage(message)))\r\n\r\n// ROOM\r\nexport const createRoom = () => io.emit('createRoom', store.getState().user.userName)\r\nexport const joinToRoom = (roomId) => io.emit('join', {\r\n    roomId,\r\n    userName: store.getState().user.userName\r\n})\r\nexport const setRoomSettings = (settings) => io.emit('setRoomSettings', settings)\r\nexport const changeTeam = (nextTeamId) => io.emit('changeTeam', nextTeamId)\r\nio.on('setRoomSettings', settings => store.dispatch(replaceGameSetting(settings)))\r\nio.on('joined', user => store.dispatch(setUser(user)))\r\nio.on('refreshPlayersInRoom', players => store.dispatch(setPlayers(players)))\r\nio.on('noRoom', () => window.alert('No room with given id'))\r\n\r\n\r\nexport default io","export const userSelector = state => state.user","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { playersSelector } from '../storage/game/game.selector'\r\nimport styles from './RoomTeams.module.scss'\r\nimport { Button } from 'antd'\r\nimport { userSelector } from '../storage/user/user.selector'\r\nimport { changeTeam } from '../socket/socketManager'\r\n\r\nconst TEAM_NAMES = [\r\n    'Kings',\r\n    'Knights',\r\n    'Rulers',\r\n    'Hussars',\r\n    'Monarchs',\r\n    'Warriors',\r\n    'Heroes',\r\n    'Spartans',\r\n    'Franks',\r\n    'Kings4',\r\n    'Kings5',\r\n    'Kings6',\r\n    'Kings7',\r\n    'Kings8',\r\n    'Kings9',\r\n    'Kings10',\r\n    'Kings11',\r\n    'Kings12',\r\n    'Kings13',\r\n    'Kings13',\r\n]\r\n\r\nexport default () => {\r\n    const players = useSelector(playersSelector)\r\n    const user = useSelector(userSelector)\r\n\r\n    return (\r\n        <>  \r\n            <div className={styles['room-header']}>Room: {user.roomId}</div>\r\n            <div className={styles['rooms-wrapper']}>\r\n                {\r\n                    players.map((v, index) => (\r\n                        <div key={index}>\r\n                            <div className={styles['room-name']}>Team {TEAM_NAMES[index]}</div>\r\n                            <div>\r\n                                <div className={styles['players-block']}>\r\n                                    {\r\n                                        players\r\n                                            .filter(v => v.teamId === index)\r\n                                            .map(v => <div key={v.socketId}>{v.userName}</div>)\r\n                                    }\r\n                                </div>\r\n                                <Button\r\n                                    onClick={() => changeTeam(index)}\r\n                                    disabled={user.teamId === index}\r\n                                >\r\n                                    Join\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                }\r\n            </div>\r\n        </>\r\n    )\r\n}","import React, { useState } from 'react';\r\nimport { Button, Input, Form } from 'antd';\r\nimport { createRoom, joinToRoom } from '../socket/socketManager';\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { setUserName } from '../storage/user/user.action';\r\nimport styles from './Lobby.module.scss'\r\nimport { userSelector } from '../storage/user/user.selector';\r\nimport RoomTeams from '../RoomTeams/RoomTeams';\r\n\r\nconst FormItem = Form.Item\r\n\r\nexport default () => {\r\n    const dispatch = useDispatch()\r\n    const [roomId, setRoomId] = useState('')\r\n    const [isNameConfirmed, setIsNameConfirmed] = useState(false)\r\n    const user = useSelector(userSelector)\r\n    const isAllDisabled = !!user.roomId\r\n    \r\n    return (\r\n        <div className={styles['lobby-wrapper']}>\r\n            <div className={styles['lobby-content-box']}>\r\n                <img alt='logo' src='/logo.png' className={`${styles['logo']}  ${styles['logo-left']}`}/>\r\n                <img alt='logo' src='/logo.png' className={`${styles['logo']}  ${styles['logo-right']}`}/>\r\n                <h3 className={styles['header']}>\r\n                    Overlight Generals <br/>\r\n                    <span className={styles['subtytle']}>Kings Alliance</span>\r\n                </h3>\r\n                <FormItem help='User Name'>\r\n                    <div style={{display: 'flex'}}>\r\n                        <Input\r\n                            onChange={e => dispatch(setUserName(e.target.value))}\r\n                            value={user.userName}\r\n                            placeholder='User Name'\r\n                            disabled={isNameConfirmed || isAllDisabled}\r\n                        />\r\n\r\n                        {\r\n                            !user.roomId &&\r\n                            <Button \r\n                                type='primary'\r\n                                disabled={isNameConfirmed || isAllDisabled}\r\n                                onClick={() => setIsNameConfirmed(true)}\r\n                            >\r\n                                Confirm\r\n                            </Button>\r\n                        }\r\n                    </div>\r\n                </FormItem>\r\n                {\r\n                    !user.roomId &&\r\n                    <div>\r\n                        <Button\r\n                            disabled={user.roomId}\r\n                            onClick={createRoom}\r\n                            style={{width: '255px'}}\r\n                        >\r\n                            Create Room\r\n                        </Button>\r\n                    </div>\r\n                }\r\n                {\r\n                    !user.roomId &&\r\n                    <div>\r\n                        <FormItem help={'Room ID to join'}>\r\n                            <div style={{display: 'flex'}}>\r\n                                <Input \r\n                                    placeholder='Room ID' \r\n                                    onChange={(e) => setRoomId(e.target.value)}\r\n                                />\r\n                                <Button onClick={() => joinToRoom(roomId)}>\r\n                                    Join\r\n                                </Button>\r\n                            </div>\r\n                        </FormItem>\r\n                    </div>\r\n                }\r\n\r\n                {\r\n                    user.roomId && <RoomTeams/>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}","export const messagesSelector = state => state.messages","import React, { useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { messagesSelector } from '../storage/messages/messages.selector'\r\nimport { sendMessage } from '../socket/socketManager'\r\nimport styles from './LiveChat.module.scss'\r\nimport { Input, Button } from 'antd'\r\n\r\nexport default () => {\r\n    const [newMessage, setNewMessage] = useState('')\r\n    const [isVisible, setIsVisible] = useState(false)\r\n    const messages = useSelector(messagesSelector)\r\n\r\n    const handleSendMessage = () => {\r\n        sendMessage(newMessage)\r\n        setNewMessage('')\r\n    }\r\n\r\n    return (\r\n        <div className={styles['chat-wrapper']}>\r\n            <div \r\n                onClick={() => setIsVisible(!isVisible)}\r\n                className={styles['chat-header']}>\r\n                Room Chat\r\n            </div>\r\n            {\r\n                isVisible &&\r\n                <div>\r\n                    <div className={styles['chat-history']}>\r\n                        {\r\n                            messages.map((v, index) => <div key={index}>{v}</div>)\r\n                        }\r\n                    </div>\r\n                    <div className={styles['new-message']}>\r\n                        <Input \r\n                            placeholder='Message....'\r\n                            value={newMessage}\r\n                            onChange={e => setNewMessage(e.target.value)}\r\n                        />\r\n                        <Button onClick={handleSendMessage}>\r\n                            Send Message\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}","import store from '../storage/store'\r\nimport { setActiveField, setCommands } from '../storage/game/game.action'\r\nimport { activeFieldSelector, commandsSelector, boardSelector, moveTypeSelector } from '../storage/game/game.selector'\r\nimport uniqid from 'uniqid'\r\nimport { addCommand } from '../socket/socketManager'\r\n\r\nconst CMD_MOVE_ALL = 'MOVE_ALL'\r\nconst CMD_MOVE_HALF = 'MOVE_HALF'\r\n\r\nexport const move = (key) => {\r\n    const commands = commandsSelector(store.getState())\r\n    const board = boardSelector(store.getState())\r\n    const activeField = activeFieldSelector(store.getState())\r\n    const moveType = moveTypeSelector(store.getState())\r\n    const prevX = activeField.x, prevY = activeField.y\r\n    \r\n    const {x, y, direction} = translateDirectionKeyToMove(prevX, prevY, key)\r\n\r\n    if(\r\n        !isPositionValid(x, y, board) || \r\n        !isPositionValid(prevX, prevY, board)\r\n    ) return\r\n\r\n    const tileTo = board[y][x]\r\n    if(tileTo.isVisible && tileTo.type === 'mountain') {\r\n        return\r\n    }\r\n\r\n    const nextCommand = {\r\n        from: {x: prevX, y: prevY},\r\n        direction,\r\n        id: uniqid(),\r\n        type: moveType === 'all' \r\n            ? CMD_MOVE_ALL\r\n            : CMD_MOVE_HALF\r\n    }\r\n\r\n    addCommand(nextCommand)\r\n    store.dispatch(setActiveField({x, y}))\r\n    store.dispatch(setCommands([...commands, nextCommand]))\r\n}\r\n\r\nconst isPositionValid = (x, y, board) => {\r\n    return (\r\n        x >= 0 && x < board[0].length &&\r\n        y >= 0 && y < board.length\r\n    )\r\n}\r\n\r\nconst translateDirectionKeyToMove = (x, y, key) => {\r\n    let direction\r\n    if(key === 'w') {\r\n        direction = 'u'\r\n        y--\r\n    }\r\n    if(key === 's') {\r\n        y++\r\n        direction = 'd'\r\n    }\r\n    if(key === 'a') {\r\n        x--\r\n        direction = 'l'\r\n    }\r\n    if(key === 'd') {\r\n        x++\r\n        direction = 'r'\r\n    }\r\n\r\n    return {x, y, direction}\r\n}","import store from '../storage/store'\r\nimport { setActiveField, removeCommands, setMoveType } from '../storage/game/game.action'\r\nimport { move } from './Moves'\r\nimport { commandsSelector } from '../storage/game/game.selector'\r\nimport { eraseCommands } from '../socket/socketManager'\r\n\r\nexport const clickOnActiveField = (x, y) => store.dispatch(setActiveField({x, y}))\r\nexport const setHalfUnitsMove = () => store.dispatch(setMoveType('half'))\r\n\r\nconst MOVE_KEYS = ['w', 's', 'a', 'd']\r\nexport const keyboardListener = ({key}) => {\r\n    if(MOVE_KEYS.includes(key)) return move(key)\r\n    if(key === 'e') eraseLastCommand()\r\n    if(key === 'q') eraseAllCommands()\r\n}\r\n\r\nconst eraseLastCommand = () => {\r\n    const commands = commandsSelector(store.getState())\r\n    if(commands.length === 0) return\r\n    const commandToErase = commands[commands.length - 1]\r\n    const commandIds = [commandToErase.id]\r\n\r\n    if(commandToErase.from) {\r\n        const {x, y} = commandToErase.from\r\n        clickOnActiveField(x, y)\r\n    }\r\n    \r\n    eraseCommands(commandIds)\r\n    store.dispatch(removeCommands(commandIds))\r\n}\r\n\r\nconst eraseAllCommands = () => {\r\n    const commands = commandsSelector(store.getState())\r\n    if(commands.length === 0) return\r\n\r\n    const commandIds = commands.map(v => v.id)\r\n    \r\n    eraseCommands(commandIds)\r\n    store.dispatch(removeCommands(commandIds))\r\n}\r\n\r\n","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { userSelector } from '../storage/user/user.selector'\r\nimport { activeFieldSelector, userColorsSelector, moveTypeSelector, abilitySelectionSelector, playerIdToTeamIdSelector } from '../storage/game/game.selector'\r\nimport classnames from 'classnames'\r\nimport { clickOnActiveField, setHalfUnitsMove } from './Reactions'\r\nimport {executeInstantCommand} from '../socket/socketManager'\r\nimport {isEqual} from 'lodash'\r\nimport { setAbilitySelection } from '../storage/game/game.action'\r\n\r\nexport default React.memo(({\r\n    field,\r\n    commands,\r\n    visibleFromAbility,\r\n    userColors\r\n}) => {\r\n    const user = useSelector(userSelector)\r\n    const activeField = useSelector(activeFieldSelector)\r\n    const moveType = useSelector(moveTypeSelector)\r\n    const abilitySelection = useSelector(abilitySelectionSelector)\r\n    const playerIdToTeamId = useSelector(playerIdToTeamIdSelector)\r\n    const dispatch = useDispatch()\r\n\r\n    const { type, owner, units, x, y, isVisible } = field\r\n    const isOwner = user.socketId === owner\r\n    const isActiveField = activeField.x === x && activeField.y === y\r\n\r\n    const handleClickField = () => {\r\n        if (!isOwner || visibleFromAbility) return\r\n        if (isActiveField && moveType === 'all') return setHalfUnitsMove()\r\n        clickOnActiveField(x, y)\r\n    }\r\n\r\n    const handleRightClickField = (event) => {\r\n        event.preventDefault()\r\n        if  (isClickableByAbility()) executeInstantCommand(abilitySelection, {x, y}) \r\n        if (abilitySelection) dispatch(setAbilitySelection(null))\r\n    }\r\n\r\n    const getBackgroundColor = () => {\r\n        if (!visibleFromAbility && !isVisible === true) return '#202020'\r\n        if(owner === 'n') return 'grey'\r\n        return userColors[owner] || 'grey'\r\n    }\r\n\r\n    const getFieldUnits = () => (visibleFromAbility || !!isVisible) && (units != null) && units\r\n    const isClickableByAbility = () => {\r\n        if(!abilitySelection) return false\r\n        if(abilitySelection === 'reborn' && type === 'castle' && playerIdToTeamId[owner] === playerIdToTeamId[user.socketId]) return true\r\n        if(abilitySelection === 'moveCapitol' && type === 'castle' && owner === user.socketId) return true\r\n        if(abilitySelection === 'plowingField' && type === 'plain' && owner === user.socketId) return true\r\n        if(abilitySelection === 'archeryFire' && (visibleFromAbility || isVisible)) return true\r\n        if(abilitySelection === 'scan') return true\r\n    }\r\n    // not-visible\r\n    return (\r\n        <div \r\n            onClick={handleClickField}\r\n            onContextMenu={handleRightClickField}\r\n            style={{\r\n                backgroundColor: getBackgroundColor(),\r\n                backgroundImage: getImageLink(type, isVisible || visibleFromAbility)\r\n            }}\r\n            className={classnames('board-tile', {\r\n                'clickable': isOwner || isClickableByAbility(),\r\n                'selected-field': isActiveField,\r\n            })}\r\n        >\r\n            {\r\n                (isActiveField && moveType === 'half')\r\n                    ? '50%'\r\n                    :  getFieldUnits()\r\n            }\r\n            {\r\n                commands.map(v => (\r\n                    <div className={getClassForArrow(v)}>\r\n                        {getSignForArrow(v)}\r\n                    </div>\r\n                ))\r\n            }\r\n        </div>\r\n    )\r\n}, (prevProps, nextProps) => {\r\n    if(\r\n        isEqual(prevProps.commands, nextProps.commands) &&\r\n        isEqual(prevProps.field, nextProps.field) &&\r\n        isEqual(prevProps.visibleFromAbility, nextProps.visibleFromAbility)\r\n    ) return true\r\n    return false\r\n})\r\n\r\nfunction getImageLink(type, isVisible) {\r\n    let imagePath = '';\r\n    isVisible = isVisible || window.debug\r\n    if (type === 'plain' || (!isVisible && type === 'capitol')) return 'unset'\r\n    else if(!isVisible && type !== 'capitol') imagePath = '/obstacle.png'\r\n    else if(type === 'castle') imagePath = '/city.png'\r\n    else if(type === 'mountain') imagePath = '/mountain.png'\r\n    else if(type === 'capitol') imagePath = '/crown.png'\r\n    else if(type === 'defendedCapitol') imagePath = '/defendedCrown.png'\r\n    else if(type === 'archeryTower') imagePath = '/archery_tower.png'\r\n    else if(type === 'observerTower') imagePath = '/observer_tower.png'\r\n    else if(type === 'abandonedFortress') imagePath = '/tower5G.png'\r\n\r\n    return `url(${process.env.PUBLIC_URL + imagePath})`\r\n}\r\n  \r\nfunction getSignForArrow({direction}) {\r\n    switch (direction) {\r\n        case 'u':return ''\r\n        case 'd':return ''\r\n        case 'l':return ''\r\n        case 'r':return ''\r\n        default: return 'x'\r\n    }\r\n}\r\n\r\nfunction getClassForArrow({direction}) {\r\n    switch (direction) {\r\n        case 'u':return 'arrow-container arrow-up'\r\n        case 'd':return 'arrow-container arrow-down'\r\n        case 'l':return 'arrow-container arrow-left'\r\n        case 'r':return 'arrow-container arrow-right'\r\n        default: return alert('command without direction')\r\n    }\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { boardSelector, commandsSelector, playerRoleSelector, userColorsSelector, abilityVisibleFieldsSelector, passiveAbilitiesSelector } from '../storage/game/game.selector'\r\nimport './Board.css'\r\nimport Field from './Field'\r\nimport { keyboardListener } from './Reactions'\r\n\r\nexport default ({\r\n    overridedBoard,\r\n    overridedUserColors\r\n}) => {\r\n    const board = overridedBoard || useSelector(boardSelector)\r\n    const userColors = overridedUserColors || useSelector(userColorsSelector)\r\n    const commands = useSelector(commandsSelector)\r\n    const playerRole = useSelector(playerRoleSelector)\r\n    const visibleFields = useSelector(abilityVisibleFieldsSelector)\r\n    const passiveAbilities = useSelector(passiveAbilitiesSelector)\r\n\r\n    const isAllVisible = playerRole === 'spectator' || playerRole === 'historySpectator' || window.debug === true\r\n    const allCrownsVisible= passiveAbilities.includes('revealCapitols')\r\n\r\n    const mouseMoveListener = ({movementX, movementY, buttons}) => {\r\n        if(buttons !== 1) return\r\n        const board = document.getElementById('board')\r\n        const {left, top} = board.style\r\n        board.style.left = (Number(left.slice(0, -2)) + movementX) + 'px'\r\n        board.style.top = (Number(top.slice(0, -2)) + movementY) + 'px'\r\n\r\n    }\r\n\r\n    const mouseWheelListener = ({deltaY}) => {\r\n        const board = document.getElementById('board')\r\n        const currnetScale = Number(board.style.transform.slice(6, -1))\r\n        const nextScale = currnetScale + (deltaY > 0\r\n                ? -0.1\r\n                : 0.1\r\n            )\r\n        if (nextScale > 2 || nextScale < 0.3) return\r\n\r\n        board.style.transform = `scale(${String(nextScale).padEnd(3, '.0')})`\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(playerRole !== 'historySpectator') {\r\n            window.addEventListener('keypress', keyboardListener)\r\n        }\r\n        window.addEventListener('mousemove', mouseMoveListener)\r\n        window.addEventListener('mousewheel', mouseWheelListener)\r\n        return () => {\r\n            if(playerRole !== 'historySpectator') {\r\n                window.removeEventListener('keypress', keyboardListener)\r\n            }\r\n            window.removeEventListener('mousemove', mouseMoveListener)\r\n            window.removeEventListener('mousewheel', mouseWheelListener)\r\n        }\r\n    }, [])\r\n\r\n    const commandsForFields = commands.reduce((acc, v) => {\r\n        const key = `${v.from.x}-${v.from.y}`\r\n        if(!acc[key]) acc[key] = []\r\n        acc[key].push(v)\r\n        return acc\r\n    }, {})\r\n\r\n    return (\r\n        <div>\r\n            <div\r\n                id='board'\r\n                className='board-container'\r\n                style={{left: '10px', top: \"10px\", transform: \"scale(1)\"}}\r\n            >\r\n                {\r\n                    board.map((row, index) => (\r\n                        <div key={index} className='board-row '>\r\n                            {\r\n                                row.map((v, index) => (\r\n                                    <Field\r\n                                        key={index}\r\n                                        userColors={userColors}\r\n                                        visibleFromAbility={isAllVisible || visibleFields[v.x]?.[v.y] || (allCrownsVisible && (v.type === 'capitol' || v.type === 'defendedCapitol'))}\r\n                                        commands={commandsForFields[`${v.x}-${v.y}`] || []}\r\n                                        field={v}\r\n                                    />\r\n                                ))\r\n                            }\r\n                        </div>\r\n                    ))\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}","export const gameSettingsSelector = state => state.settings.gameSettings","import React from 'react'\r\nimport styles from './Settings.module.scss'\r\nimport { Slider, Form, Divider, Select, Button } from 'antd'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { gameSettingsSelector } from '../storage/settings/settings.selector'\r\nimport { modifyGameSetting } from '../storage/settings/settings.action'\r\nimport { userSelector } from '../storage/user/user.selector'\r\nimport {debounce} from 'lodash'\r\nimport { setRoomSettings, startGame } from '../socket/socketManager'\r\nimport store from '../storage/store'\r\nimport { playersSelector } from '../storage/game/game.selector'\r\n\r\nconst FormItem = Form.Item\r\nconst Option = Select.Option\r\n\r\nconst AVAILABLE_GAME_MODES = [\r\n    {name: 'Conquest', description: 'Capture all opponent capitols'}\r\n]\r\nconst DISABLED_GAME_MODES = [\r\n    {name: 'Units Collector', descroption: 'Gather the biggest army in whole state'}, \r\n    {name: 'King of Castles', descroption: 'Capture the castles around the whole world'}, \r\n    {name: 'Territory Wars', descroption: 'Rule the whole world'}, \r\n]\r\n\r\nconst notifySettingsChange = debounce(\r\n    (settings) =>  setRoomSettings(settings),\r\n    500\r\n)\r\n\r\nexport default () => {\r\n    const settings = useSelector(gameSettingsSelector)\r\n    const user = useSelector(userSelector)\r\n    const players = useSelector(playersSelector)\r\n    const dispatch = useDispatch()\r\n    const isHost = user.socketId === players[0]?.socketId\r\n\r\n    const {\r\n        mapWidth,\r\n        mapHeight,\r\n        gameMode,\r\n        nonAggression,\r\n        castlesDensity,\r\n        mountainDensity,\r\n        castleProduction,\r\n        fieldProduction,\r\n        turnDuration,\r\n        archeryTowersDensity,\r\n        observerTowersDensity,\r\n        abandonedFortressesDensity\r\n    } = settings\r\n\r\n    const handleChangeSetting = (settingName, value) => {\r\n        dispatch(modifyGameSetting(settingName, value))\r\n        notifySettingsChange(gameSettingsSelector(store.getState()))\r\n    }\r\n\r\n    const handleStartBattle = () => startGame(settings)\r\n\r\n    if(!user.roomId) return null\r\n\r\n    return (\r\n        <div className={styles['settings-wrapper']}>\r\n            <div className={styles['settings-content-box']}>\r\n                <Button\r\n                    onClick={() => handleStartBattle()}\r\n                    type={\"primary\"}\r\n                    style={{width: '300px', marginTop: '10px'}}\r\n                    disabled={!isHost}\r\n                >\r\n                    Battle!\r\n                </Button>\r\n                <div className={styles['settings-list']}>\r\n                    <Divider>Only Host Can Modify This Settings</Divider>\r\n                    <Divider>Map Dimmensions</Divider>\r\n                    <div>\r\n                        <FormItem help={`Map Width: ${mapWidth}`}>\r\n                            <Slider\r\n                                disabled={!isHost}\r\n                                min={15}\r\n                                max={55}\r\n                                value={mapWidth}\r\n                                onChange={(v) => handleChangeSetting('mapWidth', v)}\r\n                            />\r\n                        </FormItem>\r\n                        <FormItem help={`Map Height: ${mapHeight}`}>\r\n                            <Slider\r\n                                disabled={!isHost}\r\n                                min={15}\r\n                                max={55}\r\n                                value={mapHeight}\r\n                                onChange={(v) => handleChangeSetting('mapHeight', v)}\r\n                            />\r\n                        </FormItem>\r\n                    </div>\r\n                    <Divider>Game Rules</Divider>\r\n                        <FormItem help={`Duration Of Non-Aggression Pact: ${nonAggression}`}>\r\n                            <Slider\r\n                                disabled={!isHost}\r\n                                min={10}\r\n                                max={300}\r\n                                step={10}\r\n                                value={nonAggression}\r\n                                onChange={(v) => handleChangeSetting('nonAggression', v)}\r\n                            />\r\n                        </FormItem>\r\n                    <Divider>Map Objects</Divider>\r\n                    <div>\r\n                        <FormItem help={`Castles Density: ${castlesDensity}`}>\r\n                            <Slider\r\n                                disabled={!isHost}\r\n                                min={0}\r\n                                max={1}\r\n                                step={0.1}\r\n                                value={castlesDensity}\r\n                                onChange={(v) => handleChangeSetting('castlesDensity', v)}\r\n                            />\r\n                        </FormItem>\r\n                        <FormItem help={`Mountains Density: ${mountainDensity}`}>\r\n                            <Slider\r\n                                disabled={!isHost}\r\n                                min={0}\r\n                                max={1}\r\n                                step={0.1}\r\n                                value={mountainDensity}\r\n                                onChange={(v) => handleChangeSetting('mountainDensity', v)}\r\n                            />\r\n                        </FormItem>\r\n                        <FormItem help={`Abandoned Fortesses Density: ${abandonedFortressesDensity}`}>\r\n                            <Slider\r\n                                disabled={!isHost}\r\n                                min={0}\r\n                                max={1}\r\n                                step={0.1}\r\n                                value={abandonedFortressesDensity}\r\n                                onChange={(v) => handleChangeSetting('abandonedFortressesDensity', v)}\r\n                            />\r\n                        </FormItem>\r\n                        <FormItem help={`Observer Towers Density: ${observerTowersDensity}`}>\r\n                            <Slider\r\n                                disabled={!isHost}\r\n                                min={0}\r\n                                max={1}\r\n                                step={0.1}\r\n                                value={observerTowersDensity}\r\n                                onChange={(v) => handleChangeSetting('observerTowersDensity', v)}\r\n                            />\r\n                        </FormItem>\r\n                        <FormItem help={`Archery Towers Density: ${archeryTowersDensity}`}>\r\n                            <Slider\r\n                                disabled={!isHost}\r\n                                min={0}\r\n                                max={1}\r\n                                step={0.1}\r\n                                value={archeryTowersDensity}\r\n                                onChange={(v) => handleChangeSetting('archeryTowersDensity', v)}\r\n                            />\r\n                        </FormItem>\r\n                    </div>\r\n                    <Divider>Other</Divider>\r\n                    <div>\r\n                        <FormItem help={`Castles Units Production Time: ${castleProduction}`}>\r\n                            <Slider\r\n                                disabled={!isHost}\r\n                                min={1}\r\n                                max={60}\r\n                                step={1}\r\n                                value={castleProduction}\r\n                                onChange={(v) => handleChangeSetting('castleProduction', v)}\r\n                            />\r\n                        </FormItem>\r\n                        <FormItem help={`Field Units Production Time: ${fieldProduction}`}>\r\n                            <Slider\r\n                                disabled={!isHost}\r\n                                min={1}\r\n                                max={60}\r\n                                step={1}\r\n                                value={fieldProduction}\r\n                                onChange={(v) => handleChangeSetting('fieldProduction', v)}\r\n                            />\r\n                        </FormItem>\r\n                        <FormItem help={`Turn Duration: ${turnDuration} ms`}>\r\n                            <Slider\r\n                                disabled={!isHost}\r\n                                min={250}\r\n                                max={3000}\r\n                                step={250}\r\n                                value={turnDuration}\r\n                                onChange={(v) => handleChangeSetting('turnDuration', v)}\r\n                            />\r\n                        </FormItem>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { playersSelector, userColorsSelector, usersStatsSelector, tourCounterSelector, playerRoleSelector } from '../storage/game/game.selector'\r\nimport classnames from 'classnames'\r\nimport styles from './GameInfo.module.scss'\r\nimport { Button } from 'antd'\r\nimport { setPlayerRole } from '../storage/game/game.action'\r\nimport { gameSettingsSelector } from '../storage/settings/settings.selector'\r\nimport { playPeacfullBackgoundMusic } from '../audioPlayer/audioPlayer'\r\nimport { userSelector } from '../storage/user/user.selector'\r\n\r\nexport default () => {\r\n    const players = useSelector(playersSelector)\r\n    const userColors = useSelector(userColorsSelector)\r\n    const userStats = useSelector(usersStatsSelector)\r\n    const user = useSelector(userSelector)\r\n    const tour = useSelector(tourCounterSelector)\r\n    const playerRole = useSelector(playerRoleSelector)\r\n    const {nonAggression} = useSelector(gameSettingsSelector)\r\n    const dispatch = useDispatch()\r\n\r\n    const handleClickLobby = () => dispatch(setPlayerRole('lobby'))\r\n    const handleClickAcceptFailure = () => dispatch(setPlayerRole('spectator'))\r\n    const handleClickHistory = () => {\r\n        playPeacfullBackgoundMusic()\r\n        dispatch(setPlayerRole('historySpectator'))\r\n    }\r\n\r\n    return (\r\n        <div className={styles['info-panel']}>\r\n            <div className={classnames(styles['grid-container'])}>\r\n                <div/>\r\n                <div>\r\n                    Team\r\n                </div>\r\n                <div className={styles['room-header']}>\r\n                    Player\r\n                </div>\r\n                <div>Army</div>\r\n                <div>Lands</div>\r\n                {\r\n                    players.map(v => (\r\n                        <React.Fragment key={v.socketId}>\r\n                            <div>\r\n                                <div\r\n                                    className={styles['color-box']}\r\n                                    style={{background: userColors[v.socketId]}}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                {v.teamId}\r\n                            </div>\r\n                            <div>\r\n                                {`${v.userName}`}\r\n                            </div>\r\n                            <div>\r\n                                {userStats[v.socketId]?.units || 0}\r\n                            </div>\r\n                            <div>\r\n                                {userStats[v.socketId]?.lands || 0}\r\n                            </div>\r\n                        </React.Fragment>\r\n                    ))\r\n                }\r\n            </div>\r\n            <div>\r\n                Tour: {tour} / {nonAggression}\r\n            </div>\r\n            <div>\r\n                {\r\n                    playerRole === 'spectator'  &&\r\n                    <Button\r\n                        type=\"primary\"\r\n                        onClick={handleClickHistory}\r\n                        style={{width: '100%'}}\r\n                    >\r\n                        Battle History\r\n                    </Button>\r\n                }\r\n                {\r\n                    (playerRole === 'spectator' || playerRole === 'historySpectator') &&\r\n                    <Button\r\n                        onClick={handleClickLobby}\r\n                        type={\"danger\"}\r\n                        style={{width: '100%'}}\r\n                    >\r\n                        Back To Lobby!\r\n                    </Button>\r\n                }\r\n                {\r\n                    playerRole === 'fighter' && userStats[user.socketId]?.lands === 0 &&\r\n                    <Button\r\n                        onClick={handleClickAcceptFailure}\r\n                        type={\"danger\"}\r\n                        style={{width: '100%'}}\r\n                    >\r\n                        Accept Failure\r\n                    </Button>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useState } from 'react'\r\nimport styles from './AudioControl.module.scss'\r\nimport { Button, Slider } from 'antd'\r\nimport { SoundOutlined } from '@ant-design/icons'\r\nimport { setVolume } from '../audioPlayer/audioPlayer'\r\nimport * as ap from '../audioPlayer/audioPlayer'\r\n\r\nexport default () => {\r\n    const [vloumeLevel, setVloumeLevel] = useState(50)\r\n\r\n    const handleSetVolumeLevel = (level) => {\r\n        setVloumeLevel(level)\r\n        setVolume(level / 100)\r\n    } \r\n\r\n    return (\r\n        <div className={styles['audio-panel']}>\r\n            <Button\r\n                onClick={() => handleSetVolumeLevel(vloumeLevel ? 0 : 100)}\r\n                icon={<SoundOutlined />}\r\n            />\r\n            <div className={styles['slider-wrapper']}>\r\n                <Slider\r\n                    min={0}\r\n                    max={100}\r\n                    onChange={handleSetVolumeLevel}\r\n                    value={vloumeLevel}\r\n                />\r\n            </div>\r\n            {/* <div>\r\n                <Button onClick={() => ap.playArcheriesReady()}>playBattleMusic2</Button>\r\n                <Button onClick={() => ap.playPlowingFieldConfirmation()}>playPlowingFieldConfirmation</Button>\r\n                <Button onClick={() => ap.playCrownFinder()}>playCrownFinder</Button>\r\n            </div> */}\r\n        </div>\r\n    )\r\n}","export const historySelector = state => state.history.history\r\nexport const historyUserColorsSelector = state => state.history.userColors\r\n","import { useState, useRef, useEffect } from \"react\"\r\n\r\nconst useRefState = initialValue => {\r\n    const [state, setState] = useState(initialValue)\r\n    const stateRef = useRef(state)\r\n    useEffect(\r\n      () => { stateRef.current = state },\r\n      [state]\r\n    )\r\n    return [state, stateRef, setState]\r\n}\r\n\r\nexport default useRefState","import React, { useState } from 'react'\r\nimport { historySelector, historyUserColorsSelector } from '../storage/history/history.selector'\r\nimport { useSelector } from 'react-redux'\r\nimport styles from './BattleHistory.module.scss'\r\nimport Board from '../Game/Board'\r\nimport { Slider, Button } from 'antd'\r\nimport { DoubleLeftOutlined, BackwardOutlined, CaretLeftOutlined, CaretRightOutlined, FastForwardOutlined, DoubleRightOutlined } from '@ant-design/icons';\r\nimport useRefState from '../hooks/useRefState'\r\n\r\n\r\nexport default () => {\r\n    const history = useSelector(historySelector)\r\n    const historyUserColors = useSelector(historyUserColorsSelector)\r\n    const [tourIndex, tourIndexRef, setTourIndex] = useRefState(0)\r\n    const [board, setBoard] = useState(history[0])\r\n    const [speed, speedRef, setSpeed] = useRefState(25)\r\n    const [isAutoPlay, isAutoPlayRef, setIsAutoPlay] = useRefState(false)\r\n\r\n    const updateBoard = (tourIndex) => {\r\n        setTourIndex(tourIndex)\r\n        setBoard(history[tourIndex])\r\n    }\r\n\r\n    const incrementBoard = () => {\r\n        if(!history[tourIndexRef.current + 1]) {\r\n            return false\r\n        }\r\n        updateBoard(tourIndexRef.current + 1)\r\n        return true\r\n    }\r\n\r\n    const rewindBack = (frames) => {\r\n        const nextBoardIndex = tourIndexRef.current - frames\r\n        updateBoard(nextBoardIndex < 0 \r\n            ? 0 \r\n            : nextBoardIndex\r\n        )\r\n    }\r\n\r\n    const rewindForward = (frames) => {\r\n        const nextBoardIndex = tourIndexRef.current + frames\r\n        updateBoard(nextBoardIndex >= history.length \r\n                        ? (history.length - 1) \r\n                        : nextBoardIndex\r\n        )\r\n    }\r\n\r\n\r\n    const autoFrma = (init) => {\r\n        if((init || isAutoPlayRef.current) && incrementBoard()) setTimeout(() => {\r\n            autoFrma()\r\n        }, 1000 / speedRef.current)\r\n    }\r\n    \r\n    return (\r\n        <>\r\n            <div className={styles['speed-slider']}>\r\n                <Slider\r\n                    max={100}\r\n                    min={1}\r\n                    step={1}\r\n                    value={speed}\r\n                    onChange={setSpeed}\r\n                />\r\n                <div>\r\n                    Speed x {speed}\r\n                </div>\r\n                <div>\r\n                    <Button\r\n                        icon={<DoubleLeftOutlined />}\r\n                        onClick={() => rewindBack(40)}\r\n                    />\r\n                    <Button\r\n                        icon={<BackwardOutlined/>}\r\n                        onClick={() => rewindBack(20)}\r\n                    />\r\n                    <Button\r\n                        icon={<CaretLeftOutlined />}\r\n                        onClick={() => rewindBack(10)}\r\n                    />\r\n                    {\r\n                        !isAutoPlay &&\r\n                        <Button\r\n                            type=\"primary\"\r\n                            onClick={() => {\r\n                                setIsAutoPlay(true)\r\n                                autoFrma(true)\r\n                            }}\r\n                        >\r\n                            Auto Play\r\n                        </Button>\r\n                    }\r\n                    {\r\n                        isAutoPlay &&\r\n                        <Button\r\n                            type=\"primary\"\r\n                            onClick={() => setIsAutoPlay(false)}\r\n                        >\r\n                            Pause\r\n                        </Button>\r\n                    }\r\n                    <Button\r\n                        icon={<CaretRightOutlined />}\r\n                        onClick={() => rewindForward(10)}\r\n                    />\r\n                    <Button\r\n                        icon={<FastForwardOutlined />}\r\n                        onClick={() => rewindForward(20)}\r\n                    />                \r\n                    <Button\r\n                        icon={<DoubleRightOutlined />}\r\n                        onClick={() => rewindForward(40)}\r\n                    />                \r\n                </div>\r\n            </div>\r\n            {\r\n                board &&\r\n                <Board\r\n                    overridedBoard={board}\r\n                    overridedUserColors={historyUserColors}\r\n                />\r\n            }\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport { Popover, Divider } from 'antd'\r\nimport styles from './Abilities.module.scss'\r\nimport classnames from 'classnames'\r\nimport { useDispatch } from 'react-redux'\r\nimport { setAbilitySelection } from '../storage/game/game.action'\r\n\r\nexport default ({\r\n    ability,\r\n    handleClick,\r\n    disabled=false,\r\n    selectedAbility,\r\n    cooldown,\r\n    isPassive,\r\n    isOwned\r\n}) => {\r\n    const dispatch = useDispatch()\r\n    const { name, description, icon, id, maxCooldown, cost, from} = ability\r\n\r\n    const handleAbiliyBlockClick = () => {\r\n        if(selectedAbility === id) dispatch(setAbilitySelection(null))\r\n        else !disabled && handleClick()\r\n    }\r\n\r\n    const isDisabled = (cooldown || disabled)\r\n\r\n    return (\r\n        <Popover \r\n            title={name}\r\n            placement=\"rightTop\"\r\n            content={(\r\n                <div className={styles['ability-description-box']}>\r\n                    <div className={styles['popover-stats']}>\r\n                        <div>{`Cost: ${cost} units from ${from}`}</div>\r\n                        {\r\n                            !isPassive &&\r\n                            <div>Cooldown: {cooldown || '0'}/{maxCooldown}</div>\r\n                        }\r\n                        {\r\n                            isPassive &&\r\n                            <div>Passive Ability</div>\r\n                        }\r\n                    </div>\r\n                    {description}\r\n                    \r\n                </div>\r\n            )}\r\n        >\r\n            <div className={styles['ability-block-container']}>\r\n                <div\r\n                    onClick={handleAbiliyBlockClick}\r\n                    style={{backgroundImage: icon}}\r\n                    className={classnames(styles['ability-block'], {\r\n                        [styles['selected-block']]: selectedAbility === id,\r\n                        [styles['clickable']]: !isOwned && !isDisabled\r\n                    })}\r\n                >\r\n                    <div\r\n                        style={{boxShadow: !isOwned ? `inset 0 0px 3px ${Math.ceil(40*cooldown/maxCooldown)}px rgba(0, 0, 0, 0.8)` : 'inset 0 0px 3px 40px rgba(255, 223, 0, 0.35'}}\r\n                        className={classnames(styles['filler-block'], {\r\n                            [styles['filler-block__disabled']]: !isOwned && isDisabled\r\n                        })}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </Popover>\r\n    )\r\n}","import React from 'react'\r\nimport styles from './Abilities.module.scss'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { userSelector } from '../storage/user/user.selector'\r\nimport { usersStatsSelector, abilitySelectionSelector, cooldownsSelector, passiveAbilitiesSelector } from '../storage/game/game.selector'\r\nimport Ability from './Ability'\r\nimport { setAbilitySelection } from '../storage/game/game.action'\r\nimport { executeInstantCommand } from '../socket/socketManager'\r\nimport { playArcheriesReady, playPlowingFieldConfirmation, playMoveCapitolConfirmation, playCrownFinder, playAutumnSelect } from '../audioPlayer/audioPlayer'\r\n\r\nconst getImageLink = (imgPath) => `url(${process.env.PUBLIC_URL + imgPath})`\r\nconst abilityReborn = {\r\n    name: 'Reborn From Ashes',\r\n    id: 'reborn',\r\n    type: 'select',\r\n    icon: getImageLink('/ability_reborn.jpg'),\r\n    description: 'Reborn in on of ally\\'s castle. Click on ability and select (by right click) a castle with minimum 100 units to reborn there.',\r\n    cost: 100,\r\n    from: 'ally castle',\r\n    maxCooldown: 500,\r\n}\r\n\r\nconst capitolAbilities = [\r\n    {\r\n        name: 'Unite Army',\r\n        id: 'unite',\r\n        icon: getImageLink('/ability_uniteArmy.png'),\r\n        type: 'instant',\r\n        description: 'Gather all units from whole kingdom in your capitol immediately.',\r\n        cost: 0,\r\n        from: 'capitol',\r\n        maxCooldown: 500,\r\n    },\r\n    {\r\n        name: 'Move Capitol',\r\n        id: 'moveCapitol',\r\n        icon: getImageLink('/ability_moveCapitol.jpg'),\r\n        type: 'select',\r\n        description: 'Select owned castle to your new capitol. Select ability and right click on selected castle.',\r\n        cost: 250,\r\n        from: 'capitol',\r\n        maxCooldown: 250,\r\n    },\r\n    {\r\n        name: 'Ultra Defender',\r\n        id: 'defender',\r\n        icon: getImageLink('/logo.png'),\r\n        type: 'instant',\r\n        description: 'Units inside you capitol fight with double power for short period',\r\n        cost: 50,\r\n        from: 'capitol',\r\n        maxCooldown: 10000,\r\n    },\r\n    {\r\n        name: 'Plowing The Field',\r\n        id: 'plowingField',\r\n        type: 'select',\r\n        icon: getImageLink('/ability_plowingField.png'),\r\n        description: 'Clear one of controlled fields from your units to hide from enemies.',\r\n        cost: 250,\r\n        from: 'capitol',\r\n        maxCooldown: 250,\r\n    },\r\n]\r\n\r\nconst builidingAbilities = [\r\n    {\r\n        name: 'Scan Area',\r\n        id: 'scan',\r\n        type: 'select',\r\n        icon: getImageLink('/ability_observer.png'),\r\n        description: 'Scan area you can not reach. Selected fields (by right click) will be visible even if you have no units in this area.',\r\n        cost: 150,\r\n        from: 'observation tower',\r\n        fromFieldName: 'observerTower',\r\n        maxCooldown: 100,\r\n    },\r\n    {\r\n        name: 'Longrange Archery Fire',\r\n        id: 'archeryFire',\r\n        type: 'select',\r\n        icon: getImageLink('/ability_archery.png'),\r\n        description: 'Select (by right click) one of visible fields and order archeries longrange fire. Damage 60% of units on empty areas and 20% in buildings',\r\n        cost: 600,\r\n        from: 'archery tower',\r\n        fromFieldName: 'archeryTower',\r\n        maxCooldown: 400,\r\n    },\r\n    {\r\n        name: 'Autumn Of The Middle Ages',\r\n        id: 'autumn',\r\n        type: 'instant',\r\n        icon: getImageLink('/ability_autumn.png'),\r\n        description: 'Cause a tragedy across all kingdoms. After tragedy only one unit on every standard field will remain.',\r\n        cost: 1500,\r\n        from: 'abondoned fortress',\r\n        fromFieldName: 'abandonedFortress',\r\n        maxCooldown: 2500,\r\n    },\r\n]\r\n\r\nconst passiveAbilities = [\r\n    {\r\n        name: 'Reveal Capitols',\r\n        id: 'revealCapitols',\r\n        type: 'instant',\r\n        icon: getImageLink('/ability_show_crown.PNG'),\r\n        description: 'Make all capitols visible on map (only you can see it).',\r\n        cost: 3000,\r\n        from: 'capitol',\r\n        maxCooldown: 1,\r\n    }\r\n]\r\n\r\n\r\nexport default () => {\r\n    const user = useSelector(userSelector)\r\n    const userStats = useSelector(usersStatsSelector)\r\n    const selectedAbility = useSelector(abilitySelectionSelector)\r\n    const cooldowns = useSelector(cooldownsSelector)\r\n    const gatheredPassiveAbilities = useSelector(passiveAbilitiesSelector)\r\n    const dispatch = useDispatch()\r\n\r\n    const playerStats = userStats[user.socketId]\r\n    if (!playerStats) return null\r\n    const isPlayerDead = !playerStats.units\r\n    const handleSetAbilitySelectionMode = (ability) => dispatch(setAbilitySelection(ability)) \r\n    const handleClickAbility = (ability) => {\r\n        const {type, id} = ability\r\n        if(type === 'select') handleSetAbilitySelectionMode(id)\r\n        if(type === 'instant') executeInstantCommand(id)\r\n\r\n        if(id === 'archeryFire') playArcheriesReady()\r\n        if(id === 'autumn') playAutumnSelect()\r\n        if(id === 'revealCapitols' || id === 'scan') playCrownFinder()\r\n        if(id === 'moveCapitol') playMoveCapitolConfirmation()\r\n        if(id === 'plowingField') playPlowingFieldConfirmation()\r\n        \r\n    }\r\n    const capitol = playerStats.ownedSpecialFields.find(v => v.type === 'capitol' || v.type === 'defendedCapitol')\r\n\r\n\r\n    return (\r\n        <div className={styles['ability-panel']}>\r\n            {\r\n                isPlayerDead &&\r\n                <Ability\r\n                    handleClick={() => handleClickAbility(abilityReborn)}\r\n                    disabled={false}\r\n                    ability={abilityReborn}\r\n                    selectedAbility={selectedAbility}\r\n                    cooldown={cooldowns[abilityReborn.id]}\r\n                />\r\n            }\r\n            {\r\n                !isPlayerDead &&\r\n                capitolAbilities.map(v => (\r\n                    <Ability\r\n                        key={v.id}\r\n                        handleClick={() => handleClickAbility(v)}\r\n                        disabled={capitol.units <= v.cost}\r\n                        ability={v}\r\n                        selectedAbility={selectedAbility}\r\n                        cooldown={cooldowns[v.id]}\r\n                    />\r\n                ))\r\n            }\r\n            {\r\n                !isPlayerDead &&\r\n                passiveAbilities.map(v => (\r\n                    <Ability\r\n                        key={v.id}\r\n                        handleClick={() => handleClickAbility(v)}\r\n                        disabled={capitol.units <= v.cost}\r\n                        isPassive={true}\r\n                        isOwned={gatheredPassiveAbilities.includes(v.id)}\r\n                        ability={v}\r\n                        selectedAbility={selectedAbility}\r\n                        cooldown={cooldowns[v.id]}\r\n                    />\r\n                ))\r\n            }\r\n            {\r\n                builidingAbilities\r\n                    .filter(v => playerStats[v.fromFieldName])\r\n                    .map(v => (\r\n                        <Ability\r\n                            key={v.id}\r\n                            handleClick={() => handleClickAbility(v)}\r\n                            disabled={!playerStats.ownedSpecialFields.some(field => field.type === v.fromFieldName && field.units > v.cost)}\r\n                            ability={v}\r\n                            selectedAbility={selectedAbility}\r\n                            cooldown={cooldowns[v.id]}\r\n                        />\r\n                    ))\r\n            }\r\n        </div>\r\n    )\r\n}","import React, { useEffect } from 'react';\nimport 'antd/dist/antd.css'\nimport Lobby from './Lobby/Lobby.jsx';\nimport LiveChat from './LiveChat/LiveChat';\nimport Board from './Game/Board';\nimport Settings from './Settings/Settings';\nimport { useSelector } from 'react-redux';\nimport GameInfo from './GameInfo/GameInfo';\nimport { playerRoleSelector } from './storage/game/game.selector';\nimport { playOpeningMusic } from './audioPlayer/audioPlayer';\nimport AudioControl from './AudioControl/AudioControl';\nimport './App.css'\nimport BattleHistory from './BattleHistory/BattleHistory';\nimport Abilities from './Abilities/Abilities';\n\nfunction App() {\n  const playerRole = useSelector(playerRoleSelector)\n  useEffect(() => {\n    playOpeningMusic()\n  }, [])\n\n  return (\n    <div>\n      <AudioControl/>\n      {\n        playerRole === 'fighter' &&\n        <Abilities/>\n      }\n      <GameInfo/>\n      <LiveChat/>\n      {\n        playerRole ==='lobby' &&\n        <>\n          <Lobby/>\n          <Settings/>\n        </>\n      }\n      {\n        (playerRole === 'fighter' || playerRole === 'spectator') &&\n        <Board/>\n      }\n      {\n        playerRole === 'historySpectator' &&\n        <BattleHistory/>\n      }\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux';\nimport store from './storage/store';\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>, \n    document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rooms-wrapper\":\"RoomTeams_rooms-wrapper__3evw5\",\"room-header\":\"RoomTeams_room-header__1i6AB\",\"room-name\":\"RoomTeams_room-name__2odmr\",\"players-block\":\"RoomTeams_players-block__24cKH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat-wrapper\":\"LiveChat_chat-wrapper__3yyAJ\",\"chat-history\":\"LiveChat_chat-history__2VHgG\",\"chat-header\":\"LiveChat_chat-header__1SPj-\",\"new-message\":\"LiveChat_new-message__1I6jr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"info-panel\":\"GameInfo_info-panel__3NB7p\",\"grid-container\":\"GameInfo_grid-container__1DJ7y\",\"color-box\":\"GameInfo_color-box__kQ-B1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"settings-wrapper\":\"Settings_settings-wrapper__1-tcm\",\"settings-content-box\":\"Settings_settings-content-box__38rES\",\"settings-list\":\"Settings_settings-list__3xNVK\"};"],"sourceRoot":""}